UC04 – Crear Orden de Servicio (OS)
Propósito: Iniciar atención técnica con trazabilidad.Actores: Operador.Precondiciones: Cliente y equipo registrados; autenticado.Postcondiciones: OS creada en estado RECIBIDO.Disparador: Llegada del equipo al taller.Flujo principal:
Seleccionar cliente y equipo.Capturar falla reportada, accesorios recibidos, prioridad, garantía, ubicación.Generar código OS (OS-YYYY-#####).Crear OS con estado RECIBIDO y historial.(Opcional) Imprimir constancia de recepción.Alternos:A1: Cliente/equipo no existen → invocar UC02/UC03.A2: Datos críticos faltantes → bloquear creación.Reglas: Estado inicial fijo; numeración secuencial por año.Datos/Tablas: ordenes_servicio, orden_estado_historial.
UC05 – Asignar Técnico a OS
Propósito: Designar responsable técnico.Actores: Operador, Administrador.Precondiciones: OS creada; técnico activo.Postcondiciones: Técnico asignado en la OS.Disparador: Planificación de trabajos.Flujo principal:
Abrir OS abierta.Elegir técnico disponible.Guardar asignación y registrar historial.Alternos:A1: Técnico inactivo u ocupado (capacidad) → elegir otro.Reglas: Solo roles autorizados asignan; un técnico por OS (configurable).Datos/Tablas: ordenes_servicio, orden_estado_historial, tecnicos.
UC06 – Registrar Diagnóstico y Presupuesto
Propósito: Documentar hallazgos y costos estimados.Actores: Técnico.Precondiciones: OS asignada; autenticado.Postcondiciones: Diagnóstico y presupuesto registrados.Disparador: Inicio de revisión.Flujo principal:
Cambiar estado a DIAGNOSTICO (UC07).Registrar descripción técnica en diagnosticos.Proponer servicios y repuestos (borrador) con montos.Actualizar costo_estimado de la OS.(Opcional) Enviar presupuesto al cliente para aprobación.Alternos:A1: Cliente no aprueba → OS a ANULADO o ESPERA_REPUESTO (si depende de repuestos costosos).Reglas: Trazabilidad obligatoria; sin consumo de stock hasta aprobación/ejecución.Datos/Tablas: diagnosticos, ordenes_servicio, orden_servicio_items, orden_repuesto_items.
UC07 – Gestionar Estado de la Orden
Propósito: Controlar el flujo de la OS.Actores: Técnico, Operador.Precondiciones: OS existente.Postcondiciones: Estado actualizado y auditado.Disparador: Cambio de etapa.Flujo principal:
Seleccionar nuevo estado (DIAGNOSTICO, REPARACION, ESPERA_REPUESTO, LISTO, ENTREGADO, ANULADO).Validar transición.Actualizar estado_id en OS.Registrar historial con comentario.Alternos:A1: Transición inválida → rechazar y notificar.Reglas: Transiciones válidas:RECIBIDO → DIAGNOSTICO → REPARACION → LISTO → ENTREGADOBidireccional con ESPERA_REPUESTO desde DIAGNOSTICO/REPARACIONA ANULADO desde cualquier estado.Datos/Tablas: ordenes_servicio, orden_estado_historial, estados_orden.
UC08 – Registrar Servicios y Repuestos (Ejecución)
Propósito: Detallar mano de obra y consumo de partes.Actores: Técnico.Precondiciones: OS aprobada para intervención; estado REPARACION.Postcondiciones: Items y consumos registrados; stock actualizado.Disparador: Ejecución del trabajo.Flujo principal:
Agregar servicios a orden_servicio_items (cantidad, precio).Agregar repuestos a orden_repuesto_items.Al confirmar consumo, crear SALIDA en movimientos_inventario y disminuir repuesto_existencias.Recalcular totales estimados/reales de la OS.Alternos:A1: Stock insuficiente → no permitir salida; cambiar a ESPERA_REPUESTO (UC07).A2: Devolución/rectificación → registrar AJUSTE.Reglas: No permitir salida si stock < requerido; solo admins cambian precios base.Datos/Tablas: orden_servicio_items, orden_repuesto_items, movimientos_inventario, repuesto_existencias.